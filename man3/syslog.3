.\" Written  Feb 1994 by Steve Greenland (stevegr@neosoft.com)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Translated into german by Martin Schulze (joey@finlandia.infodrom.north.de)
.\" Modified Mon Jun 10 01:27:50 1996 by Martin Schulze (joey@linux.de)
.\"
.TH SYSLOG 3 "3. Juni 1996" "Linux" "Bibliotheksfunktionen"
.SH BEZEICHNUNG
closelog, openlog, syslog \- Schreib eine Nachricht an den syslog
.SH "ÜBERSICHT"
.B #include <syslog.h>
.sp
.BI "void openlog( char " *ident ", int " option ", int  " facility )
.sp
.BI "void syslog( int " priority ", char " *format ", ...)"
.sp
.BI "void closelog( void )"
.sp
.SH BESCHREIBUNG
Syslog ist eine Möglichkeit, Nachrichten (z.B. Status- oder
Fehlerberichte) an eine zentrale Stelle auf dem System zu schicken und
dort zu verarbeiten.  Auf der Serverseite muß dazu der
.BR syslogd (8)
gestartet werden, dieser empfängt die Nachrichten.

.B openlog()
stellt eine Verbindung zum syslog Server für das Programm her.  Die
Zeichenkette, auf die 
.I ident 
zeigt, wird vor jede Nachricht gehängt und ist normalerweise der
Programmname.
.I option
und
.I facility
werden im nächsten Abschnitt behandelt.  Die Benutzung von
.B openlog()
ist optional; Gegebenenfalls wird die Routine automatisch von
.B syslog()
aufgerufen, wenn es nötig ist, dann wird
.I ident
auf NULL gesetzt.

.B syslog()
erzeugt eine Log-Nachricht, die vom
.BR syslogd (8)
verarbeitet wird.
.I priority
ist eine Kombination von
.I facility
und einem
.IR level , 
die im nächsten Abschnitt erläutert werden.  Die verbleibenden
Parameter sind
.IR format ,
wie bei
.BR  printf (3),
und weitere Argumente, die von
.I format
benötigt werden, mit der Ausnahme, daß die zwei Zeichen %m durch die
Fehlermeldung 
.RI ( strerror )
ersetzt werden, die dem aktuellen Wert von
.I errno 
entsprechen.

.B closelog()
schließt den Deskriptor, der zum Schreiben der Log-Nachrichten
benutzt wurde.  Die Benutzung von
.B closelog()
ist optional.

.SH PARAMETER
Dieser Abschnitt beschreibt die Parameter, die benutzt werden, um die
Werte von
.IR option , " facility" ", und " priority
zu setzen.
.SS option
Der Parameter
.I option
von
.B openlog()
ist eine ODER-Verknüpfung von einer dieser Konstanten:
.TP
.B LOG_CONS
schreibt direkt auf die Systemkonsole, wenn ein Fehler beim Schreiben
an den syslog auftritt.
.TP
.B LOG_NDELAY
öffnet sofort eine Verbindung zum syslog (normalerweise wird die
Verbindung erst dann hergestellt, wenn die erste Nachricht gelogt
werden soll).
.TP
.B LOG_PERROR
schreibt ebenfalls auf die Standardfehlerausgabe stderr.
.TP
.B LOG_PID
logt zusätzlich die Prozess-ID bei jeder Nachricht.
.SS facility 
Der Parameter
.I facility
wird benutzt, um anzugeben, welche Einrichtung die Nachricht sendet.
Dadurch kann mit der Konfigurationsdatei
.I syslog.conf
erreicht werden, daß Nachrichten von unterschiedlichen Einrichtungen
auch unterschiedlich behandelt werden.
.TP
.B LOG_AUTH
Sicherheits-/Authorisations-Nachrichten. Wurde verworfen. Stattdessen
sollte
.B LOG_AUTHPRIV 
benutzt werden
.TP
.B LOG_AUTHPRIV
Sicherheits-/Authorisations-Nachrichten
.TP
.B LOG_CRON
Uhr-Dämonen)
.RB ( cron " und " at )
.TP
.B LOG_DAEMON
andere System-Dämonen
.TP
.B LOG_KERN
Kernel-Nachrichten
.TP
.BR LOG_LOCAL0 " bis " LOG_LOCAL7
reserviert für den lokalen Gebrauch
.TP
.B LOG_LPR
Nachrichten vom Drucker-Subsystem
.TP
.B LOG_MAIL
Nachrichten vom Mail-Subsystem
.TP
.B LOG_NEWS
Nachrichten vom Usenet News-Subsystem
.TP
.B LOG_SYSLOG
Nachrichten, die intern vom
.B syslogd
erzeugt wurden
.TP
.BR LOG_USER (default)
Generische User-Level Nachrichten
.TP
.B LOG_UUCP
Nachrichten vom UUCP-Subsystem

.SS level
Dieser Parameter gibt die Dringlichkeitsstufe der Nachricht an.  Die
Level sind, in fallender Wichtigkeit:
.TP
.B LOG_EMERG
Das System ist unbrauchbar
.TP
.B LOG_ALERT
Es müssen dringend Aktionen eingeleitet werden
.TP
.B LOG_CRIT
Kritische Nachricht
.TP
.B LOG_ERR
Fehlernachricht
.TP
.B LOG_WARNING
Warnungen
.TP
.B LOG_NOTICE
Normale, aber bedeutende Nachricht
.TP
.B LOG_INFO
Normale Information
.TP
.B LOG_DEBUG
Debuginformation

.SH GESCHICHTE
Eine
.BR syslog \-Funktion
erschien in BSD 4.2.
.SH "SIEHE AUCH"
.BR logger (1),
.BR syslog.conf (5),
.BR syslogd (8).
