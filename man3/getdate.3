.\"  Copyright (c) 2001 Walter Harms <walter.harms@informatik.uni-oldenburg.de>
.\"
.\"  This program is free software; you can redistribute it and/or modify
.\"  it under the terms of the GNU General Public License as published by
.\"  the Free Software Foundation; version 2 dated June, 1991.
.\"
.\"  This program is distributed in the hope that it will be useful,
.\"  but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"  GNU General Public License for more details.
.\"
.\"  You should have received a copy of the GNU General Public License
.\"  along with this program;  if not, write to the Free Software
.\"  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111, USA.
.\"
.TH GETDATE 3
.SH BEZEICHNUNG
getdate \- Berechnet aus einer Zeichenkette eine struct tm
.br
.SH ÜBERSICHT
.BR"#define __USE_XOPEN_EXTENDED"
.br
.B "#include <time.h>"
.sp
.BI "struct tm *getdate (const char " *string );
.sp
.BI "extern int getdate_err;"
.sp 2
.B "#define __USE_GNU"
.sp
.BI "int getdate_r (const char " *string ", struct tm " *resbufp );
.br

.SH BESCHREIBUNG
.B getdate()
ist eine Schnittstelle zu
.BR strptime() .
Diese Funktion berechnet aus einer Zeichenkette einen struct tm.
Im Gegensatz zu
.B strptime()
wird der Formatstring für
.B getdate()
aus einer Datei gelesen, zu der die Variable
.B DATEMSK
zeigt.  Es ist auch möglich dort mehrere Formate zu speichern.
Existiert die mit
.B DATEMSK
bezeichnete Datei nicht, kommt es zu einem Fehler.  Die
Formatbeschreibung verwendet die gleichen Symbole wie
.BR strptime (3).

Fehler werden über die globale Variable
.B getdate_err
zurückgegeben:
.RS
.nf
.in 8
.ta 1n 40n
1  DATEMSK ist NULL oder nicht definiert,
2  Die Datei kann nicht gelesen werden,
3  Der Dateistatus kann nicht ermittelt werden,
4  Die Datei ist keine richtige Datei,
5  Es ist ein Lesefehler aufgetreten,
6  Es gibt nicht mehr genügend Speicher,
7  Keine Zeile in der Datei paßt zur Zeichenkette,
8  falsche Eingabe.  Z.B:
   31 Februar oder eine Zeit die sich nicht als time_t
   dargestellen läßt (Sekunden seit 01.01.1970 00:00:00 UTC)
.ta
.sp
.fi
.RE
.B getdate()
kann nicht in Threads benutzt werden, wg.
.B getdate_err
und dem statischen Buffer in dem das Ergebnis geliefert wird.
GNU stellt daher eine thread-sichere Variante zur Verfügung.  Die Funktion ist gleich.
Das Ergebis wird in den Buffer RESBUFP geschrieben und Falle eines
Fehlers wird dort der selbe Wert (!=0) geschrieben, den man sonst in
.B getdate_err
findet.

.SH UMGEBUNG
Die Variable
.B DATEMSK
ist wichtig und enthält den Namen der Datei mit der Formatspezifikation.
.B TZ
und
.B LC_TIME
werden von strptime() benutzt.

.SH "KONFORM ZU"
ISO 9899.

.SH "SIEHE AUCH"
.BR strptime (3),
.BR strftime (3),
.BR time (3),
.BR localtime (3).
