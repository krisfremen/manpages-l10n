'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\" Wed Jan 24 08:59:02 MET 1996  Martin Schulze  <joey@linux.de>
.\"	* translated into german
.\" Sun Feb 11 14:07:00 MET 1996  Martin Schulze  <joey@linux.de>
.\"	* slightly modified
.\" Modified Mon Jun 10 01:31:04 1996 by Martin Schulze (joey@linux.de)
.\"
.TH FD 4 "11. Februar 1996" "Linux" "Gerätedateien"
.SH BEZEICHNUNG
fd \- Disketten Devices
.SH KONFIGURATION
Disketten- bzw. Floppy-Laufwerke sind Block-Devices (Gerätetreiber) mit
der Major Number 2.  Normalerweise gehören sie root.floppy und haben
entweder den Zugriffsmodus 0660 (Zugriff über Gruppenzugehörigkeit) oder
0666 (jeder hat Zugriff).  Im folgenden ist
.I n
die Laufwerksnummer.  0 für das erste Laufwerk, 1 für das zweite u.s.w.

Um die Minor Number für ein spezielles Laufwerk herauszubekommen, das
am ersten Adapter angeschlossen, wird
.I n
zur Minor-Basis addiert.  Ist es hingegen am zweiten Adapter angeschlossen,
dann wird
.IR n +128
zur Minor-Basis addiert.

.B Warnung: Die Verwendung von Formaten mit mehr Spuren (Tracks) als
.B vom Laufwerk unterstützt werden, kann selbiges mechanisch
.B zerstören.
Der einmalige Versuch mehr Spuren als die üblichen 40/80
zu benutzen, sollte es zwar nicht beschädigen, jedoch wird keine
Gewähr dafür gegeben.  Device-Dateien für Formate, die das Laufwerk
nicht unterstützt, sollten nicht angelegt werden, um deren fälschliche
Benutzung auszuschließen.

Laufwerksunabhängige Device-Dateien, deren Treiber automatisch das
Diskettenformat und die Kapazität erkennen, sind:
.PP
.TS
l l.
Name	Minor-Basis #
_
\fBfd\fP\fIn\fP	0
.TE
.PP
5.25 Zoll Double Density Devices:
.PP
.TS
lw(1i) l l l l l.
Name	Kapaz.	Zyl.	Sekt.	Köpfe	Minor-Basis #
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
5.25 Zoll High Density Devices:
.PP
.TS
lw(1i) l l l l l.
Name	Kapaz.	Zyl.	Sekt.	Köpfe	Minor-Basis #
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
3.5 Zoll Double Density Devices:
.PP
.TS
lw(1i) l l l l l.
Name	Kapaz.	Zyl.	Sekt.	Köpfe	Minor-Basis #
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
3.5 Zoll High Density Devices:
.PP
.TS
lw(1i) l l l l l.
Name	Kapaz.	Zyl.	Sekt.	Köpfe	Minor-Basis #
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
3.5 Zoll Extra Density Devices:
.PP
.TS
lw(1i) l l l l l.
Name	Kapaz.	Zyl.	Sekt.	Köpfe	Minor-Basis #
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.SH BESCHREIBUNG
Die
.B fd
Devices greifen direkt auf die Diskettenlaufwerke zu.  Die folgenden
.BR ioctl (2)
Aufrufe werden von diesen Gerätetreibern unterstützt:

.TP
.B FDCLRPRM
löscht die Hardwareinformationen der eingelegten Disketten (Zylinder,
Sektoren, Spuren).
.TP
.B FDSETPRM
setzt die Hardwareinformationen der eingelegten Diskette.  Diese
Informationen gehen verloren, wenn die Diskette gewechselt wird.
.TP
.B FDDEFPRM
setzt die Hardwareinformationen der eingelegten Diskette.  Diese
Informationen überdauern auch einen Diskettenwechsel.  Allerdings wird
damit auch der "Autodetection"-Mechanismus ausgeschaltet.  Um diesen  wieder 
einzuschalten, muß ein
.B FDCLRPRM
ioctl-Aufruf abgesetzt werden.
.TP
.B FDGETDRVTYP
gibt den Typ des Laufwerks zurück (namentlich).  Bei Formaten, die von
verschiedenen Typen unterstützt werden, gibt
.B FDGETDRVTYP
den Namen zurück, der zum ältesten Laufwerkstyp paßt, der dieses
Format unterstützt.
.TP
.B FDFLUSH
erklärt den Puffer für das angegebene Laufwerk für ungültig.
.TP
.B FDSETMAXERRS
setzt die Schwelle für Fehlerberichte, Operationsabbrüche,
Recalibrating, Resetting, und sektorweises Lesen.
.TP
.B FDSETMAXERRS
gibt die aktuelle Fehlerschwelle zurück.
.TP
.B FDGETDRVTYP
gibt den internen Namen des Laufwerkes zurück.
.TP
.B FDWERRORCLR
löscht die Schreibfehler-Statistiken.
.TP
.B FDWERRORGET
liest die Schreibfehler-Statistiken.  Diese beinhalten die gesamte Zahl
der Schreibfehler, die Position und Diskette des ersten
Schreibfehlers und die Position und Diskette des letzten
Schreibfehlers.  Disketten werden anhand einer Generationenzahl
identifiziert, die bei (fast) jedem Diskettenwechsel hochgezählt wird.
.TP
.B FDTWADDLE
Schaltet den Laufwerksmotor für ein paar Mikrosekunden aus.  Dieses
kann nötig sein, um auf Disketten zugreifen zu können, dessen
Sektoren zu nah beieinander liegen.
.TP
.B FDSETDRVPRM
setzt verschiedene Laufwerksparameter.
.TP
.B FDGETDRVPRM
gibt diese zurück.
.TP
.B FDGETDRVSTAT
gibt den gepufferten Laufwerksstatus zurück (Diskettenwechsel,
Schreibschutz etc.).
.TP
.B FDPOLLDRVSTAT
fragt das Laufwerk ab und gibt seinen Status zurück.
.TP
.B FDGETFDCSTAT
gibt den Status des Floppycontrollers zurück.
.TP
.B FDRESET
setzt den Floppycontroller unter bestimmten Bedingungen zurück.
.TP
.B FDRAWCMD
sendet ein "rohes" Kommando direkt an den Floppycontroller.
.PP
Mehr Informationen sind in den Headerdateien
.IR <linux/fd.h> " und " <linux/fdreg.h> ", sowie in der manpage zu "
.B floppycontrol
zu finden.
.SH ANMERKUNGEN
Die unterschiedlichen Formate erlauben es, unterschiedliche
Diskettentypen zu lesen und zu schreiben.  Wenn eine Diskette jedoch
mit zu geringem Abstand zwischen den Sektoren formatiert wurde,
kann die Performance sinken.  Es kann dann bis zu einigen Sekunden
dauern, einen ganzen Track zu lesen.  Um dieses zu vermeiden, sollten
"interleaved" Formate benutzt werden.

Es ist nicht möglich, Disketten zu lesen, die mit GCR (Group Code
Recoding) formatiert wurden, wie es beim Apple II und MacIntosh
Computern der Fall ist (800k Disketten).

Das Lesen von hartsektorierten Disketten (ein Loch pro Sektor, mit
einem verschobenen Indexloch) wird nicht unterstützt.  Dieses war
üblich bei älteren 8-Zoll Disketten.

.SH DATEIEN
.PD 0
.TP
.I /dev/fd*
Die Floppydevices.
.PD
.SH AUTOREN
Alain Knaff (Alain.Knaff@imag.fr), David Niemi
(niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).  Übersetzt
ins Deutsche von Martin Schulze (joey@infodrom.north.de).
.SH "SIEHE AUCH"
.BR floppycontrol (1),
.BR mknod (1),
.BR chown (1),
.BR getfdprm (1),
.BR superformat (1),
.BR mount (8),
.BR setfdprm (8).

