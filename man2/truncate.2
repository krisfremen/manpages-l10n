.\" Copyright (c) 1983, 1991 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @(#)truncate.2	6.9 (Berkeley) 3/10/91
.\"
.\" Modified Sat Jul 24 12:46:33 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Tue Oct 22 22:36:33 1996 by Eric S. Raymond <esr@thyrsus.com>
.\" Modified Mon Dec 21 13:37:05 1998 by Andries Brouwer (aeb@cwi.nl)
.\" Translated into German by Dennis Stampfer <kontakt@dstampfer.de>
.\"
.TH TRUNCATE 2 "8. September 2002" "" "Systemaufrufe"
.SH BEZEICHNUNG
truncate, ftruncate \- kürzt eine Datei auf eine bestimmte Länge
.SH "ÜBERSICHT"
.B #include <unistd.h>
.sp
.BI "int truncate(const char *" pfad ", off_t " laenge );
.br
.BI "int ftruncate(int " fd ", off_t " laenge );
.SH BESCHREIBUNG
.B Truncate
kürzt die Datei, übergeben als String mittels
.I pfad
oder als Dateideskriptor
.IR fd ,
auf höchstens
.I laenge
Bytes.
War die Datei vorher größer als
.IR laenge ,
gehen die Daten darüber verlohren.
War die Datei dagegen kleiner als 
.IR laenge ,
ist nicht festgelegt, ob die Datei aufgefüllt wird oder unberührt bleibt. 
Im Normalfall wird die Datei mit 0 (0-Bytes) gefüllt.
.PP
Wird
.BR ftruncate 
benutzt, muss die Datei zum schreiben geöffnet sein.
.SH RÜCKGABEWERT
Bei Erfolg gibt die Funktion 0 zurück.  Bei Fehlern wird \-1 zurückgegeben und
.I errno
entsprechend gesetzt.
.SH FEHLER
Für
.BR truncate :
.TP
.B ENOTDIR
Ein Teil des Pfades ist kein Verzeichnis.
.TP
.B ENAMETOOLONG
Ein Teil des Pfades ist größer als 255 Zeichen oder der komplette Pfad
überschreitet eine Größe von 1023 Zeichen.
.TP
.B ENOENT
Die angegebene Datei existiert nicht.
.TP
.B EACCES
Ein Teil des Pfades kann nicht gelesen werden.
.TP
.B EACCES
Der Benutzer hat keinen Schreibzugriff auf die Datei.
.TP
.B ELOOP
Zu viele Symbolische Links wurden im Pfad gefunden.
.TP
.B EISDIR
.I pfad
ist ein Verzeichnis, keine Datei.
.TP
.B EROFS
Die Datei befindet sich in einem read-only Dateisystem.
.TP
.B ETXTBSY
Die Datei ist eine Prozedur, die ausgeführt wird.
.TP
.B EIO
Ein I/O Fehler ist beim aktualisieren der Inode aufgetreten.
.TP
.B EFAULT
.I pfad
liegt außerhalb des Programmspeichers.
.PP
Für
.BR ftruncate :
.TP
.B EBADF
.I fd
ist kein gültiger Dateideskriptor.
.TP
.B EINVAL
.I fd
referenziert auf einen Socket, nicht auf eine Datei.
.TP
.B EINVAL
.I fd
ist nicht zum Schreiben geöffnet.
.SH KONFORM ZU
4.4BSD, SVr4 (die Funktionen traten erstmals in BSD4.2 auf).
SVr4 beinhaltet noch weitere Fehler für
.BR truncate :
EINTR, EMFILE, EMULTIHP, ENAMETOOLONG, ENFILE,
ENOLINK, ENOTDIR sowie weitere Fehler für 
.BR ftruncate :
EAGAIN und EINTR.
POSIX kennt nur
.IR ftruncate ,
aber kein
.IR truncate .
.PP
In POSIX ist nicht festgelegt, was passiert wenn die Datei weniger als
.IR laenge
Bytes hat.
.SH BUGS
Diese Funktionen sollten benutzt werden um die Maximale Größe von 
Dateien zu begrenzen.
.SH SIEHE AUCH
.BR open (2)
