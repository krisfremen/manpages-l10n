.\" Copyright (c) 1983, 1991 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @(#)truncate.2	6.9 (Berkeley) 3/10/91
.\"
.\" Modified Sat Jul 24 12:46:33 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Tue Oct 22 22:36:33 1996 by Eric S. Raymond <esr@thyrsus.com>
.\" Modified Mon Dec 21 13:37:05 1998 by Andries Brouwer (aeb@cwi.nl)
.\" Translated into German by Dennis Stampfer <kontakt@dstampfer.de>
.\"
.TH TRUNCATE 2 "8. September 2002" "" "Systemaufrufe"
.SH BEZEICHNUNG
truncate, ftruncate \- kürzt eine Datei auf eine bestimmte Länge
.SH "ÜBERSICHT"
.B #include <unistd.h>
.sp
.BI "int truncate(const char *" path ", off_t " length );
.br
.BI "int ftruncate(int " fd ", off_t " length );
.SH BESCHREIBUNG
Die Funktionen
.B truncate
und
.B ftruncate
bewirken, dass die reguläre Datei, die durch
.I path
oder
.I fd
angegeben ist, auf eine Größe von exakt
.I length
Bytes abgeschnitten wird.
.LP
Wenn die Datei vorher größer war, gehen überschüssige Daten verloren.
Wenn die Datei vorher kleiner war, wird sie vergrößert und die
zusätzlichen Bytes werden als Nullen gelesen.
.LP
Der Dateizeiger wird nicht verändert.
.LP
Für
.B ftruncate
muss die Datei zum Schreiben geöffnet sein, für 
.B truncate
muss die Datei schreibbar sein.
.SH RÜCKGABEWERT
Bei Erfolg gibt die Funktion 0 zurück.  Bei Fehlern wird \-1 zurückgegeben und
.I errno
entsprechend gesetzt.
.SH FEHLER
Für
.BR truncate :
.TP
.B EACCES
Ein Teil des Pfades kann nicht gelesen werden oder die Datei kann vom
Benutzer nicht beschrieben werden.
.TP
.B EFAULT
.I pfad
liegt außerhalb des Programmspeichers.
.TP
.B EFBIG
Der Parameter
.I length
ist größer als die maximale Dateigröße. (XSI)
.TP
.B EINTR
Während der Ausführung wurde ein Signal empfangen.
.TP
.B EINVAL
Der Parameter
.I length
ist negativ oder größer als die maximale Dateigröße.
.TP
.B EIO
Ein I/O Fehler ist beim aktualisieren der Inode aufgetreten.
.TP
.B EISDIR
.I pfad
ist ein Verzeichnis, keine Datei.
.TP
.B ELOOP
Zu viele Symbolische Links wurden im Pfad gefunden.
.TP
.B ENAMETOOLONG
Ein Teil des Pfades ist größer als 255 Zeichen oder der komplette Pfad
überschreitet eine Größe von 1023 Zeichen.
.TP
.B ENOENT
Die angegebene Datei existiert nicht.
.TP
.B ENOTDIR
Ein Teil des Pfades ist kein Verzeichnis.
.TP
.B EROFS
Die Datei befindet sich in einem read-only Dateisystem.
.TP
.B ETXTBSY
Die Datei ist eine Prozedur, die ausgeführt wird.
.PP
Für
.BR ftruncate
gelten die gleichen Fehlermeldungen.  Anstelle von Dingen, die mit
.B path
schieflaufen können, gibt es jetzt Dinge, die mit
.B fd
schiefgehen können:
.TP
.B EBADF
.I fd
ist kein gültiger Dateideskriptor.
.TP
.BR EINVAL " oder " EBADF
.I fd
ist nicht zum Schreiben geöffnet.
.TP
.B EINVAL
.I fd
referenziert einen Socket, nicht eine Datei.
.SH "KONFORM ZU"
4.4BSD, SVr4 (diese Funktionsaufrufe traten zuerst in BSD 4.2 auf).
POSIX 1003.1-1996 beschreibt
.BR ftruncate .
POSIX 1003.1-2001 beschreibt ebenfalls
.IR truncate
als eine XSI-Erweiterung.
.LP
SVr4 beschreibt zusätzlich die Fehler EMFILE, EMULTIHP, ENFILE und
ENOLINK für
.BR truncate .
SVr4 dokumentiert für
.B ftruncate
den zusätzlichen Fehler EAGAIN.
.SH BERMERKUNGEN
Die Beschreibung oben ist für XSI-kompatible Systeme gedacht.  Für
nicht-XSI-kompatible Systeme erlaubt der POSIX-Standard zwei Verhalten von
.BR ftruncate ,
wenn
.I length
größer ist als die Dateilänge
(beachten Sie, dass
.B truncate
ist für eine derartige Umgebung nicht spezifiziert):
entweder wird ein Fehler zurückgeliefert oder die Datei wird vergrößert.
(Die meisten Unixe folgen den XSI-Anforderungen.)
.\" At the very least: OSF/1, Solaris 7, and FreeBSD conform, mtk, Jan 2002
.SH "SEE ALSO"
.BR open (2).
