.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1995 Michael Chastain (mec@shell.portal.com), 15 April 1995.
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" Tue Jan 23 17:17:12 MET 1996  Martin Schulze  <joey@infodrom.north.de>
.\"	* translated from english to german
.\" Sun Feb 11 14:07:00 MET 1996  Martin Schulze  <joey@linux.de>
.\"	* slightly modified
.\" Modified Mon Jun 10 01:37:48 1996 by Martin Schulze (joey@linux.de)
.\"
.TH BDFLUSH 2 "11. Februar 1996" "Linux 1.2.4" "Linux Programmierhandbuch"
.SH BEZEICHNUNG
bdflush \- start, flush, oder tune buffer-dirty-flush Dämon
.SH SYNTAX
.nf
.BI "int bdflush(int"  " func, " "long *" "address);"
.BI "int bdflush(int"  " func, " "long" " data);"
.fi
.SH BESCHREIBUNG
.B bdflush
startet, flush't, oder tune't den gleichnamigen buffer-dirty-flush
Dämon.  Nur der Superuser darf
.B bdflush 
ausführen.

Wenn
.I func
negativ oder 0 ist und kein Dämon gestartet wurde, dann wird
.B bdflush
in den Dämonmodus geschaltet und bleibt dort bestehen.

Wenn 
.I func
1 ist, werden einige "dirty buffers" auf Platten zurückgeschrieben.

Wenn
.I func
2 oder größer und gerade ist (Least Significant Bit ist 0), dann ist
.I address
die Adresse eines long word und der Tuning-Parameter mit der Nummer
.RI "(" "func" "\-2)/2"
wird in den angegebenen Speicherplatz geschrieben.

Wenn
.I func
3 oder größer und ungerade ist (Least Significant Bit ist 1), dann ist
.I data
ein long word und der Kernel setzt den Tuning-Parameter mit der Nummer
.RI "(" "func" "\-3)/2"
auf diesen Wert.

Mögliche Parameter, ihre Werte und gültige Wertebereiche sind in der
Kernel Source-Datei
.I fs/buffer.c 
definiert.

.SH "RÜCKGABEWERTE"
Wenn
.I func
0 oder negativ ist und der Dämon erfolgreich gestartet wurde, kehrt
.B bdflush
nicht wieder zurück.
Ansonsten wird bei Erfolg 0 und \-1 bei Fehlern zurückgegeben.
.I Errno
wird entsprechend gesetzt und kann zur Fehlerfindung herangezogen werden.

.SH FEHLER
.TP 0.8i
.B EPERM
Die Routine wurde nicht vom Superuser aufgerufen.
.TP
.B EFAULT
Die Adresse
.I address
zeigt außerhalb des vom User adressierbaren Speicherbereiches.
.TP
.B EBUSY
Es wurde versucht, in den Dämon-Code zu gelangen, nachdem ein anderer
Prozeß diesen bereits betreten hat.
.TP
.B EINVAL
Es wurde versucht, einen Parameter mit ungültiger Nummer zu lesen
oder zu schreiben. Oder es wurde versucht, einen Parameter mit
ungültigem Wert zu schreiben.
.SH AUTOREN
Die Funktion
.B bdflush
wurde von Linus Torvalds (Linus.Torvalds@Helsinki.fi) geschrieben, die
englische Manpage stammt von Michael Chastain (mec@shell.portal.com),
die deutsche Übersetzung von Martin Schulze (joey@infodrom.north.de).
.SH "SIEHE AUCH"
.BR fsync (2),
.BR sync (2),
.BR update (8),
.BR sync (8).
