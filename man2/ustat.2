.\" Copyright (C) 1995, Thomas K. Dyas <tdyas@eden.rutgers.edu>
.\" German Version (C) 1996 Hanno Wagner <wagner@bidnix.bid.fh-hannover.de>
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Created   Wed Aug  9 1995      Thomas K. Dyas <tdyas@eden.rutgers.edu>
.\" German Translation Mon Apr 29 1996 Hanno Wagner
.\" <wagner@bidnix.bid.fh-hannover.de>
.\"
.TH USTAT 2 "29. April 1996" "Linux 1.3.16" "Systemaufrufe"
.SH BEZEICHNUNG
ustat \- gibt Statistiken über ein Dateisystem aus
.PP
Diese Handbuchseite ist veraltet. Im Zweifelsfall ziehen Sie
die englischsprachige Handbuchseite zu Rate, indem Sie
.IP
man -LC 2 ustat
.PP
eingeben.
.SH BEZEICHNUNG
.nf
.B #include <sys/types.h>
.sp
.BI "int ustat(dev_t " dev ", struct ustat * " ubuf );
.SH BESCHREIBUNG
.B ustat
gibt Informationen über ein gemountetes Dateisystem aus.
.I dev
ist eine Gerätenummer, die das gemountete Dateisystem identifiziert.
.I ubuf
ist ein Zeiger, der auf eine ustat Struktur mit folgenden Variablen zeigt:

.sp
.RS
.nf
.ne 7
.ta 8n 16n 20n
daddr_t	f_tfree;	/* Anzahl der gesamten freien Blocks */
ino_t	f_tinode;	/* Anzahl der freien inodes */
char	f_fname[6];	/* Name des Dateisystems */
char	f_fpack[6];	/* Name des gepackten Dateisystems [?] */
.ta
.fi
.RE
.PP

Die letzten beiden Felder, f_fname und f_fpack, sind nicht implementiert
und werden immer mit Nullzeichen gefüllt.
.SH "RÜCKGABEWERT"
Wenn der Befehl erfolgreich war, wird 0 ausgegeben und die ustat Struktur,
die auf
.I ubuf
zeigt, wird gefüllt.  Wenn ein Fehler erfolgte wird \-1 zurückgegeben und
.I errno
wird gesetzt.
.SH FEHLER
.TP
.B EINVAL
.I dev
zeigt nicht auf ein Gerät mit einem gemounteten Dateisystem.
.TP
.B EFAULT
.I ubuf
zeigt außerhalb des adressierbaren Speicherraums.
.TP
.B ENOSYS
Das gemountete Dateisystem, das durch
.I dev
referenziert wird, unterstützt diese Operation nicht, ebenfalls
keine Version vor Linux-Kernel 1.3.16.
.SH BEMERKUNGEN
.B ustat
wurde nur aus Kompatibilitätszwecken implementiert.  Alle neuen Programme
sollten stattdessen
.BR statfs (2)
benutzen.
.SH GESCHICHTE
.B ustat
wurde zuerst in Linux 1.3.16 implementiert.  Alle Versionen kleiner 
als 1.3.16 werden 
.B ENOSYS
zurückgeben.
.SH "KONFORM ZU"
System V
.SH "SIEHE AUCH"
.BR statfs (2),
.BR stat (2).

