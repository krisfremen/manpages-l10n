.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" This manpage is Copyright (C) 1992 Drew Eckhardt;
.\"                               1993 Michael Haardt, Ian Jackson.
.\"
.\" Copyright 1996 C.Schmidt - deutsche Übersetzung (c.schmidt@ius.gun.de)
.\" Interner Versionslevel (Deutsche Version) : 0.1
.\" nur übersetzt, nicht korrekturgelesen...
.\"
.\" [Some polishing - aeb. In fact this text is so bad that it has to
.\" be redone.]
.\"
.\" Wenn jemand sich über Rechtschreibfehler bzw. eine fehlerhafte Über-
.\" setzung aufregen möchte so kann er das /dev/null mitteilen.
.\" (Schließlich übersetze ich diese Dinger um meine Englischkenntnisse
.\"  aufzubessern...)
.\"
.\" KONSTRUKTIVE Kritik oder ein netter Hinweis auf Fehler, aller
.\" Art, würden mich aber freuen. Danke!
.\"
.\" Nach dem Übersetzen dieser Manualpage muß ich "vermeindlich
.\" schlecht eingedeutschte Bedinungsanleitungen" auch aus einem
.\" Blickwinkel betrachten ;-)))
.\"
.\" Folgendes lass ich mal so steh'n ;-)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Modified Wed Jul 21 22:42:16 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Aug 21 18:18:14 1994: Michael Haardt's NFS diffs were
.\"          applied by hand (faith@cs.unc.edu).
.\"
.TH OPEN 2 "21 July 1993" "Linux 0.99.7" "Systemaufrufe"
.SH BEZEICHNUNG
open, creat \- Öffnen und mögliches Erzeugen einer Datei
.SH ÜBERSICHT
.nf
.B #include <sys/types.h>
.B #include <sys/stat.h>
.B #include <fcntl.h>
.sp
.BI "int open(const char *" pathname ", int " flags );
.BI "int open(const char *" pathname ", int " flags ", mode_t " mode );
.BI "int creat(const char *" pathname ", mode_t " mode );
.fi
.SH BESCHREIBUNG
.B open
versucht eine 
.I Datei 
zu öffnen, und gibt als \(lqReturncode\(rq eine Dateibeschreibung
der zu öffnen versuchten Datei zurück.  (non-negative integer)
Dieser kann in
.BR read ", " write ", etc. Anweisungen verwendet werden."
Die Möglichen
.I flags
dabei sind; Jeweils eine der folgenden Angaben:
.PP
.BR O_RDONLY ", " O_WRONLY " or " O_RDWR

.I O_RDONLY
öffnen der Datei zum NUR_LESEN

.I O_WRONLY
öffnen der Datei zum NUR_SCHREIBEN

.I O_RDWR
öffnen der Datei mit SCHREIBEN und LESEN Zugriff.
.PP
Diese 
.I flags
können außerdem noch mit einem der folgenden flags
.B bitweise_ODER_verküpft
werden.
.TP
.B O_CREAT
Wenn die Datei nicht besteht, so wird sie neu Angelegt.
.TP
.B O_EXCL
Wenn mit 
.BR O_CREAT 
verwendet und die Datei schon besteht, so ist das ein Fehler und der
.B open()
schlägt fehl.
.I Siehe BUGS
.TP
.B O_NOCTTY
wenn der
.I \(lqpathname\(rq
sich auf ein Terminal Device bezieht \(em Siehe
.BR tty (4)
\(em so bekommt der Prozeß keine Kontrolle über das Terminal, auch wenn
der Prozeß gar kein Terminal verwendet/benötigt.
.TP
.B O_TRUNC
Wenn die Datei schon besteht, so wird sie überschrieben.
.TP
.B O_APPEND
Öffnen der Datei im \(lqAnhängen\(rq Modus.  Anfänglich, und
vor jedem 
.BR write ,
wird der \(lqDatei Pointer\(rq auf das Ende der bestehenden
Datei gesetzt.  Ebenso wie bei der Verwendung von
.BR lseek.
.TP
.BR O_NONBLOCK " oder " O_NDELAY
Die Datei wird ohne BLOCKUNG geöffnet.
Wenn in diesem Modi ein \(lqSUB-System\(rq angesprochen wird, wird
der aufrufende Prozeß solange warten bis die Dateibeschreibung
.B "(file descriptor)"
zurückgegeben wird.
.TP 
.B O_SYNC
Die Datei wird im \(lqsynchron I/O Modi\(rq geöffnet.
Jeder
.BR write
über die zurückgegebene Dateibeschreibung wird den aufrufenden Prozeß
solange anhalten, bis die Daten 
.I physikalisch
auf die angesprochene Hardware geschrieben ist.
Bitte auch 
.I BUGS
beachten....
.PP
Ein Teil dieser optionalen 
.I flags
kann nach dem Öffnen der Datei unter Verwendung von
.B fcntl()
Aufrufen verändert werden.

.I mode 
ist die Angabe der zu benutzenden Dateizugriffsrechte.  (Nur wenn Datei neu
angelegt wird)

Die Definition wird, wie üblich, durch die Umgebungsvariable
.BR umask 
übernommen.  Die Zugriffsrechte der angelegten Datei werden durch 
.BR "(mode & ~umask)"
festgelegt.

.I mode
kann nur einmalig bei der Verwendung des
.B O_CREAT
\(lqflags\(rq verwendet werden; Andernfalls wird diese Anweisung ignoriert.

.I creat
kann Gleichwertig zu
.I open
betrachtet werden.
Mit Vergleichbaren \(lqflags\(rq wie
.BR O_CREAT|O_WRONLY|O_TRUNC .
.I creat
erstellt jedoch keine Gerätedatei - das tut
.IR mknod (2).

.SH "RETURN VALUE -- Wiedergabewert"


.BR open " und " creat
geben entweder die Dateibeschreibung 
.I \(lqfile descriptor\(rq 
oder, im
Fehlerfall einen RC von \-1 zurück.
(Unabhangig vom \(lqErfolg oder Nichterfolg\(rq der Anweisung wird die
passende
.I errno
gesetzt.

.SH FEHLER
.TP
.B EEXIST
.I pathname
existiert schon, und
.BR O_CREAT " und " O_EXCL
wurden verwendet.
.TP
.B EISDIR
.I pathname
bezieht sich auf einen Verzeichnisnamen, in das generell kein Schreiben möglich ist.
Anm.  des Übersetzers: Schreiben in einen \(lqVerzeichnisnamen\(rq ist
generell nicht möglich.
.TP
.B ETXTBSY 
.I pathname
Es wurde versucht 
in eine binäre Datei zu schreiben, die gerade vom System ausgeführt wird.
.TP
.B EFAULT
.IR pathname
verweist auf eine Adresse außerhalb \(lq Deines \(rq zur Verfügung
stehenden Adressraumes....
.TP
.B EACCES
Der gewünschte Zugriff auf die Datei ist nicht erlaubt, oder eines
der Verzeichnisse innerhalb von
.IR pathname
erlaubt diesen Zugriff nicht...
.TP
.B ENAMETOOLONG
.IR pathname " ist zu Lang..."
.TP
.B ENOENT
Ein Verzeichnisname aus
.I pathname
existiert nicht, oder ist ein \(lqfehlerhafter\(rq Link.
.TP
.B ENOTDIR
Eine Komponente in
.I pathname
ist nicht wirklich ein Verzeichnis.
.TP
.B EMFILE
Der laufende Prozeß hat die maximal erlaubte Anzahl der offenen Dateien
für diesen Prozeß erreicht.
.TP
.B ENFILE
Der laufende Prozeß hat die maximal erlaubte Anzahl der offenen Dateien
des Systems erreicht.
.TP
.B ENOMEM
Kein Systemspeicher mehr verfügbar....
.TP 
.B EROFS
.I pathname 
verweist auf eine Datei in einem read-only Dateisystem, und es wurde
versucht zu schreiben....
.TP
.B ELOOP
.I pathname
verweist auf einen auf einen symbolischen Link, der z. Bspl. über
\(lq Umwege \(rq durch das Dateisystem auf sich selber zeigt.
.TP
.B ENOSPC
.I pathname 
sollte Angelegt werden, aber es war kein Platz mehr.
.SH 



.SH "ANGEPASST FÜR"
SVID, AT&T, POSIX, X/OPEN, BSD 4.3
.SH BUGS
.B O_SYNC
ist zur Zeit nicht implementiert.(Stand Linux 0.99pl7)

Bei der Verwendung über NFS kann es zu Unstimmigkeiten, betreffend
konkurierender
.BR O_SYNC ", " O_NDELAY ", and " O_APPEND 
Zugriffe kommen.

.B O_EXCL
funktioniert nicht über NFS.  Bei Programmen, die auf \(lqDatei locking\(rq
angewiesen sind, bzw. \(lqvertrauen\(rq (Systemtasks), wird/kann es zu
Fehlern kommen.  Eine mögliche Lösung dafür ist es, eine identische Datei
auf dem \(lqlokalen\(rq Dateisystem zu erzeugen.
Beispielsweise durch die Verwendung von
.BR link (2) .
Danach kann mit
.BR stat (2)
die lokale Datei auf eine Zunahme des \(lq Link Counters \(rq 
gepüft werden.
Benutze 
.B nie
den Rückgabewert aus dem \fBlink()\fP Aufruf.

.SH COPYRIGHT
Copyright \(co 1996 Christian Schmidt - deutsche Übersetzung
.PP
Dieses Manual darf sowohl in der Original, als auch in der deutschen
Version mit folgender Einschränkung benutzt, Vervielfältigt und Vertrieben
werden.  Dieser Copyright Abschnitt und der \(lqHeader\(rq muß unverändert
in allen Kopien beibehalten werden.  Ferner sind die zusätzlichen
Vereinbarungen
im \(lqHeader\(rq dieses Manuals zu beachten.
 
.SH "SIEHE AUCH"
.BR read "(2), " write "(2), " fcntl "(2), " close (2),
.BR unlink "(2), " mknod "(2), " stat "(2), " umask (2),
.BR mount "(2), " socket "(2), " socket "(2), " fopen (3),
.BR link (2).
