.\"  Copyright (c) 2001 Walter Harms <walter.harms@informatik.uni-oldenburg.de>
.\"
.\"  This program is free software; you can redistribute it and/or modify
.\"  it under the terms of the GNU General Public License as published by
.\"  the Free Software Foundation; version 2 dated June, 1991.
.\"
.\"  This program is distributed in the hope that it will be useful,
.\"  but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"  GNU General Public License for more details.
.\"
.\"  You should have received a copy of the GNU General Public License
.\"  along with this program;  if not, write to the Free Software
.\"  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111, USA.
.\"
.TH TZFILE 5 
.SH BEZEICHNUNG
tzfile \- Informationen über Zeitzonen
.SH ÜBERSICHT
.B
#include <tzfile.h>
.SH BESCHREIBUNG
Wo sich die Informations-Dateien befinden, ist abhängig von der verwendeten (g)libc-Version.
Libc4/5 benutzen
.IR /usr/lin/zoneinfo ,
doch seit libc-5.4.6 befindet es sich in
.IR /usr/share/zoneinfo .
.PP
Die Informations-Dateien über die Zeitzonen, die von
.BR tzset (3)
verwendet werden, beginnen mit den magischen Zeichen "TZif", um sie
als Zeitzonen-Dateien zu identifizieren.  Die darauf folgenden 16 Byte
sind für zukünftige Dinge reserviert.
Anschließend folgen sechs 32bit-Werte (long).  (Wichtig: Die Daten kommen
in natürlicher Reihenfolge: Highbyte zu erst). Die sechs Werte bedeuten:
.TP
.I tzh_ttisgmtcnt  
Anzahl der hinterlegten UTC/lokal-Indikatoren in der Datei.
.TP
.I tzh_ttisstdcnt  
Anzahl der standard/wall-Indikatoren in der Datei.
.TP
.I tzh_leapcnt     
Anzahl der Schaltsekunden, für die Daten in der Datei gespeichert sind.
.TP
.I tzh_timecnt     
Anzahl der übergangszeiten in der Datei.
.TP
.I tzh_typecnt     
Anzahl der lokalen Zeit-Typen, für die Informationen in der Datei
gespeichert sind (darf nicht null sein).
.TP
.I tzh_charcnt    
Anzahl der Buchstaben für die Abkürzungen der Zeitzone.
.PP

Nachdem Header folgen tzh_timecnt 32bit Werte (long) in steigender Wertigkeit. 
Jeder Wert ist als Epochen-Wert (Sekunden seit 01.01.1970) zu interpretieren.
Zu jedem dieser Zeitpunkte gibt es einen Wechsel Sommer-Winterzeit
(der auch von
.BR time (2)
zurückgegeben wird).
Als nächstes kommen tzh_timecnt unsigned char Werte. Diese sind Indizes für die
nachfolgenden ttinfo Strukturen.

struct ttinfo {
                 long          tt_gmtoff;
                 int           tt_isdst;    /* wirklich 1 char ? */
                 unsigned int  tt_abbrind;  /* wirklich 1 char ? */
            };
.TP
.I tt_gmtof 
  Abstand in Sekunden zu UTC
.TP
.I tt_isdst 
  Marker für Sommerzeit (genutzt für tm_isdst in struct tm)
.TP
.I tt_abbrind 
  Index für den Zonennamen

Danach folgen ein oder mehrere Strings mit der Gesamtlänge tzh_charcnt.
 
Nachschließen folgen tzh_leapcnt paare von 32Bit Werten.
Der erste Wert gibt an wan die Schaltzeit ist, der Zweite die Anzahl der Sekunden. Die
Werte kommen in aufsteigender Reihenfolge.

Nun kommen tzh_ttisstdcnt standard/wall Marker, jeweils ein 8Bit Wert. Sie
besagen ob die Schaltzeiten als standard Zeil oder als Wallzeit zu interpretieren sind.
Das wird benötigt, wenn Zeitzonen Files für POSIX Zeitzonenvariablen benutzt werden.
(Was heist das ??)

Zum Schluß kommen tzh_ttisgmtcnt 8bit UTC/Local Indikatoren. Sie besagen ob die
Schaltzeiten als lokale Zeit oder als UTC interpretiert werden müssen.
Das wird benötigt, wenn Zeitzonen Files für POSIX Zeitzonenvariablen benutzt werden.

Falls tzh_timecnt Null ist oder die Zeit ist frühre als die erste Schaltzeit benutzt 
localtime(3) die erste Standardzeit ttinfo Struktur im File. Falls keine existiert,
 die erste ttinfo Struktur. 

.SH "SIEHE AUCH"
.BR localtime (3),
.BR tzset (3).
